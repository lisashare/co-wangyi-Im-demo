{"version":3,"sources":["webpack:///./src/pages/SysMsgs.vue?4521","webpack:///./src/pages/SysMsgs.vue","webpack:///./src/pages/SysMsgs.vue?2ab1","webpack:///./src/pages/SysMsgs.vue?5184","webpack:///./src/pages/SysMsgs.vue?d288"],"names":["mounted","$store","dispatch","updated","data","sysType","defaultAvatar","config","defaultUserIcon","deleteIdServer","isShow","computed","userInfos","state","sysMsgs","filter","msg","type","showText","friend","alias","account","avatar","from","console","log","desc","getTeamName","to","attach","team","name","op","nick","sort","msg1","msg2","time","customSysMsgs","scene","content","JSON","parse","msgList","methods","deleteMsg","idServer","commit","clearMsgs","that","$vux","confirm","show","title","onConfirm","teamId","teamlist","find","handleTeamApply","pass","action","functionName","options","done","error","obj","findTeamInfo","item","showDelBtn","vNode","attrs","stopBubble","setTimeout","hideDelBtn"],"mappings":"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B,GAAG,gBAAgB,sBAAsB,0BAA0B,gBAAgB,GAAG,yBAAyB,kBAAkB,mBAAmB,mCAAmC,wBAAwB,qBAAqB,GAAG,iCAAiC,mBAAmB,qBAAqB,GAAG,yCAAyC,gBAAgB,GAAG,yCAAyC,qBAAqB,4BAA4B,wBAAwB,gBAAgB,oBAAoB,GAAG,oCAAoC,kBAAkB,wBAAwB,GAAG,4DAA4D,eAAe,gBAAgB,iBAAiB,GAAG,0DAA0D,kBAAkB,wBAAwB,GAAG,2BAA2B,gBAAgB,qBAAqB,GAAG,0BAA0B,uBAAuB,YAAY,aAAa,gBAAgB,iBAAiB,uBAAuB,GAAG,qBAAqB;;AAEz/I;;;;;;;;;;;;;ACPA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACxKA;;AAEA;AACA,cAAc,mBAAO,CAAC,uUAA2Z;AACjb,4CAA4C,QAAS;AACrD;AACA;AACA,aAAa,mBAAO,CAAC,wDAA6D;AAClF;AACA,GAAG,KAAU;AACb;AACA;AACA,oIAAoI,qEAAqE;AACzM,6IAA6I,qEAAqE;AAClN;AACA;AACA,IAAI;AACJ;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C","file":"4.js","sourcesContent":["\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-2b3a6362\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../node_modules/vux-loader/src/after-less-loader.js!less-loader!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SysMsgs.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SysMsgs.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b3a6362\\\"}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SysMsgs.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"E:\\\\IM\\\\chat\\\\co-wangyi-Im-demo\\\\src\\\\pages\\\\SysMsgs.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] SysMsgs.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-2b3a6362\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-2b3a6362\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/SysMsgs.vue\n// module id = 303\n// module chunks = 4","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport config from '../configs'\r\nexport default {\r\n  // 进入该页面，文档被挂载\r\n  mounted () {\r\n    this.$store.dispatch('markSysMsgRead')\r\n    this.$store.dispatch('markCustomSysMsgRead')\r\n  },\r\n  updated () {\r\n    this.$store.dispatch('markSysMsgRead')\r\n    this.$store.dispatch('markCustomSysMsgRead')\r\n  },\r\n  data () {\r\n    return {\r\n      sysType: 0, // 系统消息 0, 自定义消息 1,\r\n      defaultAvatar: config.defaultUserIcon,\r\n      deleteIdServer: '',\r\n\r\n      isShow:false\r\n    }\r\n  },\r\n  computed: {\r\n    userInfos () {\r\n      return this.$store.state.userInfos || {}\r\n    },\r\n    sysMsgs () {\r\n      let sysMsgs = this.$store.state.sysMsgs.filter(msg => {\r\n        switch (msg.type) {\r\n          case 'addFriend':\r\n            msg.showText = `${msg.friend.alias || msg.friend.account} 添加您为好友~`\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar\r\n            return true\r\n          case 'deleteFriend':\r\n            msg.showText = `${msg.from} 将您从好友中删除`\r\n            msg.avatar = this.userInfos[msg.from].avatar\r\n            return false\r\n          case 'applyTeam':\r\n            console.log('applyTeam', msg)\r\n            msg.showText = msg.from\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar || this.defaultAvatar\r\n            msg.desc = `申请加入群:${this.getTeamName(msg.to)}`\r\n            return true\r\n          case 'teamInvite':\r\n            msg.showText = msg.attach.team.name\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar || this.defaultAvatar\r\n            msg.desc = `邀请你加入群${msg.to}`\r\n            return true\r\n          case 'rejectTeamApply':\r\n            msg.showText = msg.attach.team.name\r\n            msg.desc ='管理员拒绝你加入本群'\r\n            msg.avatar = msg.attach.team.avatar || this.defaultAvatar\r\n            return true\r\n          case 'rejectTeamInvite':\r\n            let op = this.userInfos[msg.from]\r\n            msg.showText = op.nick\r\n            msg.avatar = op.avatar || this.defaultAvatar\r\n            msg.desc = `${op.nick}拒绝了群${this.getTeamName(msg.to)}的入群邀请`\r\n            return true\r\n        }\r\n        console.log(msg)\r\n        return false\r\n      })\r\n      sysMsgs.sort((msg1, msg2)=>{\r\n        // 最新的排在前\r\n        return msg2.time - msg1.time\r\n      })\r\n      return sysMsgs\r\n    },\r\n    customSysMsgs () {\r\n      let customSysMsgs = this.$store.state.customSysMsgs.filter(msg => {\r\n        if (msg.scene === 'p2p') {\r\n          let content = JSON.parse(msg.content)\r\n          msg.showText = `${content.content}`\r\n          msg.avatar = this.userInfos[msg.from].avatar\r\n          return msg\r\n        }\r\n        return false\r\n      })\r\n      return customSysMsgs\r\n    },\r\n    msgList() {\r\n      return this.sysType ===  0 ? this.sysMsgs : this.customSysMsgs\r\n    }\r\n    \r\n  },\r\n  methods: {\r\n    deleteMsg(idServer){\r\n      this.$store.commit('deleteSysMsgs', {\r\n        type: this.sysType,\r\n        idServer: idServer,\r\n      })\r\n    },\r\n    clearMsgs () {\r\n      var that = this\r\n      this.$vux.confirm.show({\r\n        title: '确认要清空消息吗？',\r\n        onConfirm () {\r\n          that.$store.dispatch('resetSysMsgs', {\r\n            type: that.sysType\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getTeamName(teamId) {\r\n      let team = this.$store.state.teamlist.find(team => {\r\n        return team.teamId === teamId\r\n      })\r\n      return team && team.name || ''\r\n    },\r\n    handleTeamApply(msg, pass) {\r\n      let action\r\n      switch (msg.type) {\r\n        case 'applyTeam':\r\n          action = pass ? 'passTeamApply' : 'rejectTeamApply'\r\n          break;\r\n         case 'teamInvite':\r\n          action = pass ? 'acceptTeamInvite' : 'rejectTeamInvite'\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      this.$store.dispatch('delegateTeamFunction', {\r\n        functionName: action, \r\n        options: {\r\n          idServer: msg.idServer,\r\n          teamId: msg.to,\r\n          from: msg.from,\r\n          done: (error, obj)=>{\r\n            console.log('handleDone', obj)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    findTeamInfo(teamId) {\r\n      var team = this.$store.state.teamlist.find(item =>{\r\n        return item.teamId === teamId\r\n      })\r\n      return team && team.name || teamId\r\n    },\r\n    showDelBtn (vNode) {\r\n      if (vNode && vNode.data && vNode.data.attrs) {\r\n        this.deleteIdServer = vNode.data.attrs.idServer\r\n        this.stopBubble = true\r\n        setTimeout(() => {\r\n          this.stopBubble = false\r\n        }, 20)\r\n      }\r\n    },\r\n    hideDelBtn () {\r\n      if (this.deleteIdServer !== null && !this.stopBubble) {\r\n        // 用于判断是否前置状态是显示删除按钮\r\n        this.deleteIdServer = null\r\n        return true\r\n      }\r\n      return false\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/SysMsgs.vue","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.back-top-box {\\n  z-index: 2;\\n  position: fixed;\\n  right: 0.18rem;\\n  bottom: 0.0116rem;\\n}\\n.back-top-box .back-top {\\n  width: 2.96rem;\\n  height: 2.96rem;\\n  border-radius: 50%;\\n}\\n.back-top-box img {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n}\\n.p-sysmsgs .u-list {\\n  height: 100%;\\n  overflow-y: scroll;\\n}\\n.p-sysmsgs p {\\n  word-wrap: normal;\\n  word-break: break-all;\\n  color: #333;\\n}\\n.p-sysmsgs .g-teamSys {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -moz-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-flex: 100;\\n  -webkit-flex-grow: 100;\\n     -moz-box-flex: 100;\\n      -ms-flex-positive: 100;\\n          flex-grow: 100;\\n  -webkit-box-pack: justify;\\n  -webkit-justify-content: space-between;\\n     -moz-box-pack: justify;\\n      -ms-flex-pack: justify;\\n          justify-content: space-between;\\n  -webkit-box-align: center;\\n  -webkit-align-items: center;\\n     -moz-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  overflow: hidden;\\n}\\n.p-sysmsgs .g-teamSys .m-info {\\n  -webkit-flex-shrink: 1;\\n      -ms-flex-negative: 1;\\n          flex-shrink: 1;\\n  overflow: hidden;\\n}\\n.p-sysmsgs .g-teamSys .m-info .u-time {\\n  color: #aaa;\\n}\\n.p-sysmsgs .g-teamSys .m-info .u-desc {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  color: #aaa;\\n  font-size: 1rem;\\n}\\n.p-sysmsgs .g-teamSys .m-options {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -moz-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n  -webkit-align-items: center;\\n     -moz-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.p-sysmsgs .g-teamSys .m-options .weui-btn.weui-btn_mini {\\n  padding: 0;\\n  width: 3rem;\\n  height: 2rem;\\n}\\n.p-sysmsgs .g-teamSys .m-options .weui-btn + .weui-btn {\\n  margin-top: 0;\\n  margin-left: 0.5rem;\\n}\\n.p-sysmsgs .u-msg-state {\\n  color: #aaa;\\n  font-size: .9rem;\\n}\\n.p-sysmsgs .empty-hint {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 3.2rem;\\n  margin: auto;\\n  text-align: center;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/IM/chat/co-wangyi-Im-demo/src/pages/SysMsgs.vue\"],\"names\":[],\"mappings\":\";AAAA;EACE,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,eAAe;EACf,YAAY;EACZ,aAAa;CACd;AACD;EACE,aAAa;EACb,mBAAmB;CACpB;AACD;EACE,kBAAkB;EAClB,sBAAsB;EACtB,YAAY;CACb;AACD;EACE,qBAAc;EAAd,sBAAc;EAAd,kBAAc;EAAd,qBAAc;EAAd,cAAc;EACd,sBAAe;EAAf,uBAAe;KAAf,mBAAe;MAAf,uBAAe;UAAf,eAAe;EACf,0BAA+B;EAA/B,uCAA+B;KAA/B,uBAA+B;MAA/B,uBAA+B;UAA/B,+BAA+B;EAC/B,0BAAoB;EAApB,4BAAoB;KAApB,uBAAoB;MAApB,uBAAoB;UAApB,oBAAoB;EACpB,iBAAiB;CAClB;AACD;EACE,uBAAe;MAAf,qBAAe;UAAf,eAAe;EACf,iBAAiB;CAClB;AACD;EACE,YAAY;CACb;AACD;EACE,iBAAiB;EACjB,wBAAwB;EACxB,oBAAoB;EACpB,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,qBAAc;EAAd,sBAAc;EAAd,kBAAc;EAAd,qBAAc;EAAd,cAAc;EACd,0BAAoB;EAApB,4BAAoB;KAApB,uBAAoB;MAApB,uBAAoB;UAApB,oBAAoB;CACrB;AACD;EACE,WAAW;EACX,YAAY;EACZ,aAAa;CACd;AACD;EACE,cAAc;EACd,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,QAAQ;EACR,SAAS;EACT,YAAY;EACZ,aAAa;EACb,mBAAmB;CACpB\",\"file\":\"SysMsgs.vue\",\"sourcesContent\":[\".back-top-box {\\n  z-index: 2;\\n  position: fixed;\\n  right: 0.18rem;\\n  bottom: 0.0116rem;\\n}\\n.back-top-box .back-top {\\n  width: 2.96rem;\\n  height: 2.96rem;\\n  border-radius: 50%;\\n}\\n.back-top-box img {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n}\\n.p-sysmsgs .u-list {\\n  height: 100%;\\n  overflow-y: scroll;\\n}\\n.p-sysmsgs p {\\n  word-wrap: normal;\\n  word-break: break-all;\\n  color: #333;\\n}\\n.p-sysmsgs .g-teamSys {\\n  display: flex;\\n  flex-grow: 100;\\n  justify-content: space-between;\\n  align-items: center;\\n  overflow: hidden;\\n}\\n.p-sysmsgs .g-teamSys .m-info {\\n  flex-shrink: 1;\\n  overflow: hidden;\\n}\\n.p-sysmsgs .g-teamSys .m-info .u-time {\\n  color: #aaa;\\n}\\n.p-sysmsgs .g-teamSys .m-info .u-desc {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  color: #aaa;\\n  font-size: 1rem;\\n}\\n.p-sysmsgs .g-teamSys .m-options {\\n  display: flex;\\n  align-items: center;\\n}\\n.p-sysmsgs .g-teamSys .m-options .weui-btn.weui-btn_mini {\\n  padding: 0;\\n  width: 3rem;\\n  height: 2rem;\\n}\\n.p-sysmsgs .g-teamSys .m-options .weui-btn + .weui-btn {\\n  margin-top: 0;\\n  margin-left: 0.5rem;\\n}\\n.p-sysmsgs .u-msg-state {\\n  color: #aaa;\\n  font-size: .9rem;\\n}\\n.p-sysmsgs .empty-hint {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 3.2rem;\\n  margin: auto;\\n  text-align: center;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-2b3a6362\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vux-loader/src/after-less-loader.js!./~/less-loader/lib/loader.js!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/SysMsgs.vue\n// module id = 346\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"g-inherit m-article\"\n  }, [_c('header', {\n    staticClass: \"header bc line-bottom\"\n  }, [_c('i', {\n    staticClass: \"left fa-icon fa fa-angle-left\",\n    on: {\n      \"click\": function($event) {\n        _vm.$router.back(-1)\n      }\n    }\n  }), _vm._v(\" \"), _c('h1', [_vm._v(\"通知\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"m-article-main p-sysmsgs\"\n  }, [_c('group', {\n    staticClass: \"u-list\"\n  }, [_vm._l((_vm.msgList), function(msg) {\n    return [(msg.type === \"applyTeam\" || msg.type === \"teamInvite\") ? _c('cell', {\n      directives: [{\n        name: \"touch\",\n        rawName: \"v-touch:swipeleft\",\n        value: (_vm.showDelBtn),\n        expression: \"showDelBtn\",\n        arg: \"swipeleft\"\n      }, {\n        name: \"touch\",\n        rawName: \"v-touch:swiperight\",\n        value: (_vm.hideDelBtn),\n        expression: \"hideDelBtn\",\n        arg: \"swiperight\"\n      }],\n      key: msg.idServer,\n      staticClass: \"u-list-item\",\n      attrs: {\n        \"idServer\": msg.idServer\n      }\n    }, [_c('img', {\n      staticClass: \"icon\",\n      attrs: {\n        \"slot\": \"icon\",\n        \"width\": \"24\",\n        \"src\": msg.avatar\n      },\n      slot: \"icon\"\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"g-teamSys\",\n      attrs: {\n        \"slot\": \"child\"\n      },\n      slot: \"child\"\n    }, [_c('div', {\n      staticClass: \"m-info\"\n    }, [_c('span', {\n      staticClass: \"u-name\"\n    }, [_vm._v(_vm._s(msg.from))]), _vm._v(\" \"), _c('span', {\n      staticClass: \"u-time\"\n    }, [_vm._v(_vm._s(msg.showTime))]), _vm._v(\" \"), _c('p', {\n      staticClass: \"u-desc\"\n    }, [_vm._v(_vm._s(msg.desc))]), _vm._v(\" \"), (msg.ps) ? _c('p', {\n      staticClass: \"u-desc\"\n    }, [_vm._v(_vm._s((\"留言:\" + (msg.ps))))]) : _vm._e()]), _vm._v(\" \"), (_vm.deleteIdServer !== msg.idServer) ? _c('div', {\n      staticClass: \"m-options\",\n      attrs: {\n        \"slot\": \"default\"\n      },\n      slot: \"default\"\n    }, [(msg.state === \"init\") ? [_c('x-button', {\n      attrs: {\n        \"type\": \"primary\",\n        \"mini\": true,\n        \"action-type\": \"button\"\n      },\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.handleTeamApply(msg, true)\n        }\n      }\n    }, [_vm._v(\"同意\")]), _vm._v(\" \"), _c('x-button', {\n      attrs: {\n        \"type\": \"warn\",\n        \"mini\": true,\n        \"action-type\": \"button\"\n      },\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.handleTeamApply(msg, false)\n        }\n      }\n    }, [_vm._v(\"拒绝\")])] : _c('div', {\n      staticClass: \"u-msg-state\"\n    }, [_vm._v(\"\\n                \" + _vm._s(msg.state === 'error' ? '已过期' : msg.state === 'rejected' ? '已拒绝' : '已同意') + \"\\n              \")])], 2) : _vm._e()]), _vm._v(\" \"), _c('span', {\n      staticClass: \"u-tag-del\",\n      class: {\n        active: _vm.deleteIdServer === msg.idServer\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.deleteMsg(msg.idServer)\n        }\n      }\n    })]) : _c('cell', {\n      directives: [{\n        name: \"touch\",\n        rawName: \"v-touch:swipeleft\",\n        value: (_vm.showDelBtn),\n        expression: \"showDelBtn\",\n        arg: \"swipeleft\"\n      }, {\n        name: \"touch\",\n        rawName: \"v-touch:swiperight\",\n        value: (_vm.hideDelBtn),\n        expression: \"hideDelBtn\",\n        arg: \"swiperight\"\n      }],\n      key: msg.idServer,\n      staticClass: \"u-list-item\",\n      attrs: {\n        \"title\": msg.showText,\n        \"value\": msg.showTime,\n        \"inline-desc\": msg.desc,\n        \"idServer\": msg.idServer\n      }\n    }, [_c('img', {\n      staticClass: \"icon\",\n      attrs: {\n        \"slot\": \"icon\",\n        \"width\": \"24\",\n        \"src\": msg.avatar\n      },\n      slot: \"icon\"\n    }), _vm._v(\" \"), _c('span', {\n      staticClass: \"u-tag-del\",\n      class: {\n        active: _vm.deleteIdServer === msg.idServer\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.deleteMsg(msg.idServer)\n        }\n      }\n    })])]\n  })], 2), _vm._v(\" \"), (!_vm.msgList || _vm.msgList.length < 1) ? _c('div', {\n    staticClass: \"empty-hint\"\n  }, [_vm._v(\"暂无任何消息\")]) : _vm._e()], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"scroll-hide\",\n      rawName: \"v-scroll-hide\",\n      value: (_vm.isShow),\n      expression: \"isShow\"\n    }],\n    staticClass: \"back-top-box\",\n    attrs: {\n      \"scroll-hide-distance\": \"300\"\n    }\n  }, [(_vm.isShow) ? _c('div', {\n    staticClass: \"back-top animated\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.defaultAvatar\n    }\n  })]) : _vm._e()])])\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-2b3a6362\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2b3a6362\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/SysMsgs.vue\n// module id = 356\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?sourceMap!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-2b3a6362\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../node_modules/vux-loader/src/after-less-loader.js!../../node_modules/less-loader/lib/loader.js!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./SysMsgs.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"a8082c46\", content, false);\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/index.js?sourceMap!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-2b3a6362\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../node_modules/vux-loader/src/after-less-loader.js!../../node_modules/less-loader/lib/loader.js!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./SysMsgs.vue\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/index.js?sourceMap!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-2b3a6362\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../node_modules/vux-loader/src/after-less-loader.js!../../node_modules/less-loader/lib/loader.js!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./SysMsgs.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-2b3a6362\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vux-loader/src/after-less-loader.js!./~/less-loader/lib/loader.js!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/SysMsgs.vue\n// module id = 365\n// module chunks = 4"],"sourceRoot":""}